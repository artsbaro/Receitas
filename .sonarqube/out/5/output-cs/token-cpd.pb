ª?
WC:\Projetos\Receitas\src\DevWebReceitas.Services.Api\Controllers\CategoriaController.cs
	namespace		 	
DevWebReceitas		
 
.		 
Services		 !
.		! "
Api		" %
.		% &
Controllers		& 1
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
CategoriaController $
:% &
ControllerBase' 5
{ 
private 
readonly 
ICategoriaService *
_service+ 3
;3 4
public 
CategoriaController "
(" #
ICategoriaService# 4
service5 <
)< =
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpPost	 
] 
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
public 
IActionResult 
Create #
(# $
[$ %
FromBody% -
]- .
CategoriaInsertDto/ A
itemB F
)F G
{ 	
try 
{ 
var 
id 
= 
_service  
.  !
Create! '
(' (
item( ,
), -
;- .
return   
CreatedAtAction   &
(  & '
nameof  ' -
(  - .
Find  . 2
)  2 3
,  3 4
new  5 8
{  9 :
id  ; =
}  > ?
,  ? @
item  A E
)  E F
;  F G
}!! 
catch"" 
("" 
	Exception"" 
ex"" 
)""  
{## 
return$$ 

StatusCode$$ !
($$! "
$num$$" %
,$$% &
ex$$' )
)$$) *
;$$* +
}%% 
}&& 	
[(( 	
HttpPut((	 
](( 
[)) 	 
ProducesResponseType))	 
()) 
$num)) !
)))! "
]))" #
[** 	 
ProducesResponseType**	 
(** 
$num** !
)**! "
]**" #
[++ 	 
ProducesResponseType++	 
(++ 
$num++ !
)++! "
]++" #
public,, 
IActionResult,, 
Update,, #
(,,# $
[,,$ %
FromBody,,% -
],,- .
CategoriaDto,,/ ;
item,,< @
),,@ A
{-- 	
try.. 
{// 
_service00 
.00 
Update00 
(00  
item00  $
)00$ %
;00% &
return11 
Ok11 
(11 
)11 
;11 
}22 
catch33 
(33 
ArgumentException33 $
ex33% '
)33' (
{44 
return55 
NotFound55 
(55  
new55  #
Error55$ )
(55) *
ex55* ,
)55, -
)55- .
;55. /
}66 
catch77 
(77 
	Exception77 
ex77 
)77  
{88 
return99 

StatusCode99 !
(99! "
$num99" %
,99% &
ex99' )
)99) *
;99* +
}:: 
};; 	
[== 	

HttpDelete==	 
(== 
$str== 
)== 
]==  
[>> 	 
ProducesResponseType>>	 
(>> 
$num>> !
)>>! "
]>>" #
[?? 	 
ProducesResponseType??	 
(?? 
$num?? !
)??! "
]??" #
[@@ 	 
ProducesResponseType@@	 
(@@ 
$num@@ !
)@@! "
]@@" #
publicAA 
IActionResultAA 
RemoveAA #
(AA# $
GuidAA$ (
codigoAA) /
)AA/ 0
{BB 	
tryCC 
{DD 
_serviceEE 
.EE 
RemoveEE 
(EE  
codigoEE  &
)EE& '
;EE' (
returnFF 
OkFF 
(FF 
)FF 
;FF 
}GG 
catchHH 
(HH 
ArgumentExceptionHH $
exHH% '
)HH' (
{II 
returnJJ 
NotFoundJJ 
(JJ  
newJJ  #
ErrorJJ$ )
(JJ) *
exJJ* ,
)JJ, -
)JJ- .
;JJ. /
}KK 
catchLL 
(LL 
	ExceptionLL 
exLL 
)LL  
{MM 
returnNN 

StatusCodeNN !
(NN! "
$numNN" %
,NN% &
exNN' )
.NN) *
MessageNN* 1
)NN1 2
;NN2 3
}OO 
}PP 	
[RR 	
HttpGetRR	 
]RR 
[SS 	 
ProducesResponseTypeSS	 
(SS 
typeofSS $
(SS$ %
IEnumerableSS% 0
<SS0 1
CategoriaDtoSS1 =
>SS= >
)SS> ?
,SS? @
$numSSA D
)SSD E
]SSE F
[TT 	 
ProducesResponseTypeTT	 
(TT 
$numTT !
)TT! "
]TT" #
publicUU 
IActionResultUU 
FindUU !
(UU! "
[UU" #
	FromQueryUU# ,
]UU, -
CategoriaFilterUU. =
filterUU> D
)UUD E
{VV 	
tryWW 
{XX 
varYY 
resultYY 
=YY 
_serviceYY %
.YY% &
ListYY& *
(YY* +
filterYY+ 1
)YY1 2
;YY2 3
returnZZ 
OkZZ 
(ZZ 
resultZZ  
)ZZ  !
;ZZ! "
}[[ 
catch\\ 
(\\ 
	Exception\\ 
ex\\ 
)\\  
{]] 
return^^ 

StatusCode^^ !
(^^! "
$num^^" %
,^^% &
ex^^' )
.^^) *
Message^^* 1
)^^1 2
;^^2 3
}__ 
}`` 	
[bb 	
HttpGetbb	 
(bb 
$strbb 
)bb 
]bb 
[cc 	 
ProducesResponseTypecc	 
(cc 
typeofcc $
(cc$ %
CategoriaDtocc% 1
)cc1 2
,cc2 3
$numcc4 7
)cc7 8
]cc8 9
[dd 	 
ProducesResponseTypedd	 
(dd 
$numdd !
)dd! "
]dd" #
[ee 	 
ProducesResponseTypeee	 
(ee 
$numee !
)ee! "
]ee" #
[ff 	
Consumesff	 
(ff 
$strff $
)ff$ %
]ff% &
publicgg 
IActionResultgg 
Findgg !
(gg! "
Guidgg" &
codigogg' -
)gg- .
{hh 	
tryii 
{jj 
returnkk 
Okkk 
(kk 
_servicekk "
.kk" #

FindByCodekk# -
(kk- .
codigokk. 4
)kk4 5
)kk5 6
;kk6 7
}ll 
catchmm 
(mm 
ArgumentExceptionmm $
exmm% '
)mm' (
{nn 
returnoo 
NotFoundoo 
(oo  
newoo  #
Erroroo$ )
(oo) *
exoo* ,
)oo, -
)oo- .
;oo. /
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
returnss 

StatusCodess !
(ss! "
$numss" %
,ss% &
exss' )
.ss) *
Messagess* 1
)ss1 2
;ss2 3
}tt 
}uu 	
}vv 
}ww Ó}
UC:\Projetos\Receitas\src\DevWebReceitas.Services.Api\Controllers\ReceitaController.cs
	namespace

 	
DevWebReceitas


 
.

 
Services

 !
.

! "
Api

" %
.

% &
Controllers

& 1
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
Produces 
( 
$str  
)  !
]! "
[ 
ApiController 
] 
public 

class 
ReceitaController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IReceitaService (
_service) 1
;1 2
public 
ReceitaController  
(  !
IReceitaService! 0
receitaService1 ?
)? @
{ 	
_service 
= 
receitaService %
;% &
} 	
[ 	
HttpPost	 
] 
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
[ 	
Consumes	 
( 
$str '
)' (
]( )
public 
async 
Task 
< 
IActionResult '
>' (
Create) /
(/ 0
[0 1
FromForm1 9
]9 :
ReceitaInsertDto; K
itemL P
)P Q
{ 	
try 
{   
var!! 
code!! 
=!! 
await!!  
Task!!! %
.!!% &
Run!!& )
(!!) *
(!!* +
)!!+ ,
=>!!- /
_service!!0 8
.!!8 9
Create!!9 ?
(!!? @
item!!@ D
)!!D E
)!!E F
;!!F G
return"" 
CreatedAtAction"" &
(""& '
nameof""' -
(""- .
Find"". 2
)""2 3
,""3 4
new""5 8
{""9 :
code""; ?
}""@ A
)""A B
;""B C
}## 
catch$$ 
($$ 
ArgumentException$$ $
ex$$% '
)$$' (
{%% 
return&& 

StatusCode&& !
(&&! "
$num&&" %
,&&% &
new&&' *
Error&&+ 0
(&&0 1
ex&&1 3
.&&3 4
Message&&4 ;
)&&; <
)&&< =
;&&= >
}'' 
catch(( 
((( 
	Exception(( 
ex(( 
)((  
{)) 
return** 

StatusCode** !
(**! "
$num**" %
,**% &
new**' *
Error**+ 0
(**0 1
ex**1 3
.**3 4
Message**4 ;
)**; <
)**< =
;**= >
}++ 
},, 	
[.. 	
HttpPut..	 
].. 
[// 	 
ProducesResponseType//	 
(// 
$num// !
)//! "
]//" #
[00 	 
ProducesResponseType00	 
(00 
$num00 !
)00! "
]00" #
[11 	 
ProducesResponseType11	 
(11 
$num11 !
)11! "
]11" #
[22 	
Consumes22	 
(22 
$str22 '
)22' (
]22( )
public33 
async33 
Task33 
<33 
IActionResult33 '
>33' (
Update33) /
(33/ 0
[330 1
FromForm331 9
]339 :

ReceitaDto33; E
item33F J
)33J K
{44 	
try55 
{66 
await77 
Task77 
.77 
Run77 
(77 
(77  
)77  !
=>77" $
_service77% -
.77- .
Update77. 4
(774 5
item775 9
)779 :
)77: ;
;77; <
return88 
Ok88 
(88 
)88 
;88 
}99 
catch:: 
(:: 
ArgumentException:: $
ex::% '
)::' (
{;; 
return<< 

StatusCode<< !
(<<! "
$num<<" %
,<<% &
new<<' *
Error<<+ 0
(<<0 1
ex<<1 3
.<<3 4
Message<<4 ;
)<<; <
)<<< =
;<<= >
}== 
catch>> 
(>> 
	Exception>> 
ex>> 
)>>  
{?? 
return@@ 

StatusCode@@ !
(@@! "
$num@@" %
,@@% &
ex@@' )
)@@) *
;@@* +
}AA 
}BB 	
[DD 	

HttpDeleteDD	 
(DD 
$strDD 
)DD 
]DD  
[EE 	 
ProducesResponseTypeEE	 
(EE 
$numEE !
)EE! "
]EE" #
[FF 	 
ProducesResponseTypeFF	 
(FF 
$numFF !
)FF! "
]FF" #
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
RemoveGG) /
(GG/ 0
GuidGG0 4
codigoGG5 ;
)GG; <
{HH 	
tryII 
{JJ 
awaitKK 
TaskKK 
.KK 
RunKK 
(KK 
(KK  
)KK  !
=>KK" $
_serviceKK% -
.KK- .
RemoveKK. 4
(KK4 5
codigoKK5 ;
)KK; <
)KK< =
;KK= >
returnLL 
OkLL 
(LL 
)LL 
;LL 
}MM 
catchNN 
(NN 
ArgumentExceptionNN $
exNN% '
)NN' (
{OO 
returnPP 

StatusCodePP !
(PP! "
$numPP" %
,PP% &
newPP' *
ErrorPP+ 0
(PP0 1
exPP1 3
.PP3 4
MessagePP4 ;
)PP; <
)PP< =
;PP= >
}QQ 
catchRR 
(RR 
	ExceptionRR 
exRR 
)RR  
{SS 
returnTT 

StatusCodeTT !
(TT! "
$numTT" %
,TT% &
newTT' *
ErrorTT+ 0
(TT0 1
exTT1 3
.TT3 4
MessageTT4 ;
)TT; <
)TT< =
;TT= >
}UU 
}VV 	
[XX 	
HttpGetXX	 
]XX 
[YY 	 
ProducesResponseTypeYY	 
(YY 
typeofYY $
(YY$ %
IEnumerableYY% 0
<YY0 1

ReceitaDtoYY1 ;
>YY; <
)YY< =
,YY= >
$numYY? B
)YYB C
]YYC D
[ZZ 	 
ProducesResponseTypeZZ	 
(ZZ 
$numZZ !
)ZZ! "
]ZZ" #
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (
Find[[) -
([[- .
[[[. /
	FromQuery[[/ 8
][[8 9
ReceitaFilter[[: G
filter[[H N
)[[N O
{\\ 	
try]] 
{^^ 
return__ 
Ok__ 
(__ 
await__ 
Task__  $
.__$ %
Run__% (
(__( )
(__) *
)__* +
=>__, .
_service__/ 7
.__7 8
List__8 <
(__< =
filter__= C
)__C D
)__D E
)__E F
;__F G
}`` 
catchaa 
(aa 
	Exceptionaa 
exaa 
)aa  
{bb 
returncc 

StatusCodecc !
(cc! "
$numcc" %
,cc% &
newcc' *
Errorcc+ 0
(cc0 1
excc1 3
.cc3 4
Messagecc4 ;
)cc; <
)cc< =
;cc= >
}dd 
}ee 	
[gg 	
HttpGetgg	 
(gg 
$strgg 
)gg 
]gg 
[hh 	 
ProducesResponseTypehh	 
(hh 
typeofhh $
(hh$ %

ReceitaDtohh% /
)hh/ 0
,hh0 1
$numhh2 5
)hh5 6
]hh6 7
[ii 	 
ProducesResponseTypeii	 
(ii 
$numii !
)ii! "
]ii" #
[jj 	 
ProducesResponseTypejj	 
(jj 
$numjj !
)jj! "
]jj" #
[kk 	
Consumeskk	 
(kk 
$strkk $
)kk$ %
]kk% &
publicll 
asyncll 
Taskll 
<ll 
IActionResultll '
>ll' (
Findll) -
(ll- .
Guidll. 2
codigoll3 9
)ll9 :
{mm 	
trynn 
{oo 
returnpp 
Okpp 
(pp 
awaitpp 
Taskpp  $
.pp$ %
Runpp% (
(pp( )
(pp) *
)pp* +
=>pp, .
_servicepp/ 7
.pp7 8

FindByCodepp8 B
(ppB C
codigoppC I
)ppI J
)ppJ K
)ppK L
;ppL M
}qq 
catchrr 
(rr 
ArgumentExceptionrr $
exrr% '
)rr' (
{ss 
returntt 
NotFoundtt 
(tt  
newtt  #
Errortt$ )
(tt) *
extt* ,
)tt, -
)tt- .
;tt. /
}uu 
catchvv 
(vv 
	Exceptionvv 
exvv 
)vv  
{ww 
returnxx 

StatusCodexx !
(xx! "
$numxx" %
,xx% &
newxx' *
Errorxx+ 0
(xx0 1
exxx1 3
)xx3 4
)xx4 5
;xx5 6
}yy 
}zz 	
[|| 	
HttpGet||	 
(|| 
$str|| )
)||) *
]||* +
[}} 	 
ProducesResponseType}}	 
(}} 
typeof}} $
(}}$ %

ReceitaDto}}% /
)}}/ 0
,}}0 1
$num}}2 5
)}}5 6
]}}6 7
[~~ 	 
ProducesResponseType~~	 
(~~ 
$num~~ !
)~~! "
]~~" #
[ 	 
ProducesResponseType	 
( 
$num !
)! "
]" #
public
 
async
 
Task
 
<
 
IActionResult
 '
>
' (
Imagem
) /
(
/ 0
Guid
0 4
codigoReceita
5 B
)
B C
{
 	
try
 
{
 
byte
 
[
 
]
 
img
 
=
 
await
 "
Task
# '
.
' (
Run
( +
(
+ ,
(
, -
)
- .
=>
/ 1
_service
2 :
.
: ;
FindImageByCode
; J
(
J K
codigoReceita
K X
)
X Y
)
Y Z
;
Z [
return
 
File
 
(
 
img
 
,
  
$str
! ,
)
, -
;
- .
}
 
catch
 
(
 
ArgumentException
 $
ex
% '
)
' (
{
 
return
 
NotFound
 
(
  
new
  #
Error
$ )
(
) *
ex
* ,
.
, -
Message
- 4
)
4 5
)
5 6
;
6 7
}
 
catch
 
(
 
	Exception
 
ex
 
)
  
{
 
return
 

StatusCode
 !
(
! "
$num
" %
,
% &
new
' *
Error
+ 0
(
0 1
ex
1 3
)
3 4
)
4 5
;
5 6
}
 
}
 	
[
 	
HttpPut
	 
(
 
$str
 '
)
' (
]
( )
[
 	"
ProducesResponseType
	 
(
 
typeof
 $
(
$ %

ReceitaDto
% /
)
/ 0
,
0 1
$num
2 5
)
5 6
]
6 7
[
 	"
ProducesResponseType
	 
(
 
$num
 !
)
! "
]
" #
[
 	"
ProducesResponseType
	 
(
 
$num
 !
)
! "
]
" #
public
 
async
 
Task
 
<
 
IActionResult
 '
>
' (
Like
) -
(
- .
Guid
. 2
codigoReceita
3 @
)
@ A
{
 	
try
 
{
 
await
 
Task
 
.
 
Run
 
(
 
(
  
)
  !
=>
" $
_service
% -
.
- .
Like
. 2
(
2 3
codigoReceita
3 @
)
@ A
)
A B
;
B C
return
 
Ok
 
(
 
)
 
;
 
}
 
catch
 
(
 
ArgumentException
 $
ex
% '
)
' (
{
 
return
 
NotFound
 
(
  
new
  #
Error
$ )
(
) *
ex
* ,
.
, -
Message
- 4
)
4 5
)
5 6
;
6 7
}
 
catch
   
(
   
	Exception
   
ex
   
)
    
{
¡¡ 
return
¢¢ 

StatusCode
¢¢ !
(
¢¢! "
$num
¢¢" %
,
¢¢% &
new
¢¢' *
Error
¢¢+ 0
(
¢¢0 1
ex
¢¢1 3
)
¢¢3 4
)
¢¢4 5
;
¢¢5 6
}
££ 
}
¤¤ 	
[
¦¦ 	
HttpPut
¦¦	 
(
¦¦ 
$str
¦¦ *
)
¦¦* +
]
¦¦+ ,
[
§§ 	"
ProducesResponseType
§§	 
(
§§ 
typeof
§§ $
(
§§$ %

ReceitaDto
§§% /
)
§§/ 0
,
§§0 1
$num
§§2 5
)
§§5 6
]
§§6 7
[
¨¨ 	"
ProducesResponseType
¨¨	 
(
¨¨ 
$num
¨¨ !
)
¨¨! "
]
¨¨" #
[
©© 	"
ProducesResponseType
©©	 
(
©© 
$num
©© !
)
©©! "
]
©©" #
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
IActionResult
ªª '
>
ªª' (
Dislike
ªª) 0
(
ªª0 1
Guid
ªª1 5
codigoReceita
ªª6 C
)
ªªC D
{
«« 	
try
¬¬ 
{
­­ 
await
®® 
Task
®® 
.
®® 
Run
®® 
(
®® 
(
®®  
)
®®  !
=>
®®" $
_service
®®% -
.
®®- .
Dislike
®®. 5
(
®®5 6
codigoReceita
®®6 C
)
®®C D
)
®®D E
;
®®E F
return
¯¯ 
Ok
¯¯ 
(
¯¯ 
)
¯¯ 
;
¯¯ 
}
°° 
catch
±± 
(
±± 
ArgumentException
±± $
ex
±±% '
)
±±' (
{
²² 
return
³³ 
NotFound
³³ 
(
³³  
new
³³  #
Error
³³$ )
(
³³) *
ex
³³* ,
.
³³, -
Message
³³- 4
)
³³4 5
)
³³5 6
;
³³6 7
}
´´ 
catch
µµ 
(
µµ 
	Exception
µµ 
ex
µµ 
)
µµ  
{
¶¶ 
return
·· 

StatusCode
·· !
(
··! "
$num
··" %
,
··% &
new
··' *
Error
··+ 0
(
··0 1
ex
··1 3
)
··3 4
)
··4 5
;
··5 6
}
¸¸ 
}
¹¹ 	
}
ºº 
}»» 
DC:\Projetos\Receitas\src\DevWebReceitas.Services.Api\Errors\Error.cs
	namespace 	
DevWebReceitas
 
. 
Services !
.! "
Api" %
.% &
Errors& ,
{ 
public 

class 
Error 
{ 
public 
string 
Message 
{ 
get  #
;# $
}% &
public		 
Error		 
(		 
	Exception		 
ex		 !
)		! "
{

 	
Message 
= 
ex 
. 
Message  
;  !
} 	
public 
Error 
( 
string 
errorMessage (
)( )
{ 	
Message 
= 
errorMessage "
;" #
} 	
} 
} ÌN
RC:\Projetos\Receitas\src\DevWebReceitas.Services.Api\NativeInjectorBootStrapper.cs
	namespace 	
DevWebReceitas
 
. 
Services !
.! "
Api" %
{ 
public 

static 
class &
NativeInjectorBootStrapper 2
{ 
public 
static 
void 
RegisterServices +
(+ ,
IServiceCollection, >
services? G
)G H
{ 	
services 
. 
AddSingleton !
<! " 
IHttpContextAccessor" 6
,6 7
HttpContextAccessor8 K
>K L
(L M
)M N
;N O
services 
. 
AddSingleton !
<! "!
IReceitaEditDtoMapper" 7
,7 8 
ReceitaEditDtoMapper9 M
>M N
(N O
)O P
;P Q
services 
. 
AddSingleton !
<! "
IReceitaDtoMapper" 3
,3 4
ReceitaDtoMapper5 E
>E F
(F G
)G H
;H I
services 
. 
AddSingleton !
<! "
IReceitaMapper" 0
,0 1
ReceitaMapper2 ?
>? @
(@ A
)A B
;B C
LoadAllAssemblies 
( 
) 
;  
services 
.  
RegisterRepositories )
() *
)* +
. "
RegisterDomainServices '
(' (
)( )
. '
RegisterApplicationServices ,
(, -
)- .
.   
RegisterMappers    
(    !
)  ! "
;  " #
}!! 	
public## 
static## 
IServiceCollection## ( 
RegisterRepositories##) =
(##= >
this##> B
IServiceCollection##C U
services##V ^
)##^ _
{$$ 	
var%% 
types%% 
=%% 
typeof%% 
(%% 
IRepository%% *
<%%* +
,%%+ ,
>%%, -
)%%- .
.&& 
FindInAssembly&& 
(&&  
x&&  !
=>&&" $
x&&% &
.&&& '
GetName&&' .
(&&. /
)&&/ 0
.&&0 1
Name&&1 5
==&&6 8
$str&&9 T
)&&T U
;&&U V
foreach(( 
((( 
var(( 
type(( 
in((  
types((! &
)((& '
services)) 
.)) 
	AddScoped)) "
())" #
type))# '
.))' (
Key))( +
,))+ ,
type))- 1
.))1 2
Value))2 7
)))7 8
;))8 9
return++ 
services++ 
;++ 
},, 	
public.. 
static.. 
IServiceCollection.. ("
RegisterDomainServices..) ?
(..? @
this..@ D
IServiceCollection..E W
services..X `
)..` a
{// 	
var00 
types00 
=00 
typeof00 
(00 
IDomainService00 -
<00- .
,00. /
>00/ 0
)000 1
.11 
FindInAssembly11 
(11  
x11  !
=>11" $
x11% &
.11& '
GetName11' .
(11. /
)11/ 0
.110 1
Name111 5
==116 8
$str119 Y
)11Y Z
;11Z [
foreach33 
(33 
var33 
type33 
in33  
types33! &
)33& '
services44 
.44 
	AddScoped44 "
(44" #
type44# '
.44' (
Key44( +
,44+ ,
type44- 1
.441 2
Value442 7
)447 8
;448 9
return66 
services66 
;66 
}77 	
public99 
static99 
IServiceCollection99 ('
RegisterApplicationServices99) D
(99D E
this99E I
IServiceCollection99J \
services99] e
)99e f
{:: 	
var;; 
types;; 
=;; 
typeof;; 
(;; 
IServiceBase;; +
<;;+ ,
>;;, -
);;- .
.<< 
FindInAssembly<< 
(<<  
x<<  !
=><<" $
x<<% &
.<<& '
GetName<<' .
(<<. /
)<</ 0
.<<0 1
Name<<1 5
==<<6 8
$str<<9 U
)<<U V
;<<V W
foreach>> 
(>> 
var>> 
type>> 
in>>  
types>>! &
)>>& '
services?? 
.?? 
	AddScoped?? "
(??" #
type??# '
.??' (
Key??( +
,??+ ,
type??- 1
.??1 2
Value??2 7
)??7 8
;??8 9
returnAA 
servicesAA 
;AA 
}BB 	
publicDD 
staticDD 
IServiceCollectionDD (
RegisterMappersDD) 8
(DD8 9
thisDD9 =
IServiceCollectionDD> P
servicesDDQ Y
)DDY Z
{EE 	
returnFF 
servicesFF 
;FF 
}GG 	
privateKK 
staticKK 

DictionaryKK !
<KK! "
TypeKK" &
,KK& '
TypeKK( ,
>KK, -
FindInAssemblyKK. <
(KK< =
thisKK= A
TypeKKB F
typeKKG K
,KKK L
FuncKKM Q
<KKQ R
AssemblyKKR Z
,KKZ [
boolKK\ `
>KK` a
	predicateKKb k
)KKk l
{LL 	
returnMM 
	AppDomainMM 
.MM 
CurrentDomainMM *
.NN 
GetAssembliesNN 
(NN 
)NN  
.OO 
WhereOO 
(OO 
	predicateOO  
)OO  !
.PP 

SelectManyPP 
(PP 
xPP 
=>PP  
xPP! "
.PP" #
GetExportedTypesPP# 3
(PP3 4
)PP4 5
)PP5 6
.QQ 
WhereQQ 
(QQ 
xQQ 
=>QQ 
xRR 
.RR 
IsClassRR 
&&SS 
!SS 
xSS 
.SS 

IsAbstractSS $
&&TT 
xTT 
.TT 
GetInterfacesTT &
(TT& '
)TT' (
.TT( )
AnyTT) ,
(TT, -
)TT- .
&&UU 
(UU 
xWW 
.WW 
GetInterfacesWW '
(WW' (
)WW( )
.WW) *
AnyWW* -
(WW- .
iWW. /
=>WW0 2
iXX 
.XX 
IsGenericTypeXX +
&&YY 
iYY  
.YY  !$
GetGenericTypeDefinitionYY! 9
(YY9 :
)YY: ;
==YY< >
typeYY? C
)ZZ 
||\\ 
!\\ 
x\\ 
.\\ 
GetInterfaces\\ +
(\\+ ,
)\\, -
.\\- .
Any\\. 1
(\\1 2
i\\2 3
=>\\4 6
i\\7 8
.\\8 9
IsGenericType\\9 F
)\\F G
)]] 
)^^ 
.^^ 
ToDictionary^^ 
(^^ 
x__ 
=>__ 
x__ 
.`` 
GetInterfaces`` &
(``& '
)``' (
.aa 
Whereaa 
(aa 
iaa  
=>aa! #
!aa$ %
iaa% &
.aa& '
IsGenericTypeaa' 4
)aa4 5
.bb 
OrderByDescendingbb *
(bb* +
ibb+ ,
=>bb- /
ibb0 1
.bb1 2
GetInterfacesbb2 ?
(bb? @
)bb@ A
.bbA B
LengthbbB H
)bbH I
.cc 
Firstcc 
(cc 
)cc  
,cc  !
xdd 
=>dd 
xdd 
)ee 
;ee 
}ff 	
privatehh 
statichh 
voidhh 
LoadAllAssemblieshh -
(hh- .
)hh. /
{ii 	
varjj 
loadedAssembliesjj  
=jj! "
	AppDomainjj# ,
.jj, -
CurrentDomainjj- :
.jj: ;
GetAssembliesjj; H
(jjH I
)jjI J
.jjJ K
ToListjjK Q
(jjQ R
)jjR S
;jjS T
varkk 
loadedPathskk 
=kk 
loadedAssemblieskk .
.kk. /
Selectkk/ 5
(kk5 6
akk6 7
=>kk8 :
akk; <
.kk< =
Locationkk= E
)kkE F
.kkF G
ToArraykkG N
(kkN O
)kkO P
;kkP Q
varmm 
referencedPathsmm 
=mm  !
	Directorymm" +
.mm+ ,
GetFilesmm, 4
(mm4 5
	AppDomainmm5 >
.mm> ?
CurrentDomainmm? L
.mmL M
BaseDirectorymmM Z
,mmZ [
$strmm\ c
)mmc d
;mmd e
varnn 
toLoadnn 
=nn 
referencedPathsnn (
.nn( )
Wherenn) .
(nn. /
rnn/ 0
=>nn1 3
!nn4 5
loadedPathsnn5 @
.nn@ A
ContainsnnA I
(nnI J
rnnJ K
,nnK L
StringComparernnM [
.nn[ \&
InvariantCultureIgnoreCasenn\ v
)nnv w
)nnw x
.nnx y
ToListnny 
(	nn 
)
nn 
;
nn 
toLoadpp 
.pp 
ForEachpp 
(pp 
pathpp 
=>pp  "
loadedAssembliespp# 3
.pp3 4
Addpp4 7
(pp7 8
	AppDomainpp8 A
.ppA B
CurrentDomainppB O
.ppO P
LoadppP T
(ppT U
AssemblyNameppU a
.ppa b
GetAssemblyNameppb q
(ppq r
pathppr v
)ppv w
)ppw x
)ppx y
)ppy z
;ppz {
}qq 	
}tt 
}uu )
[C:\Projetos\Receitas\src\DevWebReceitas.Services.Api\OperationFilter\FileUploadOperation.cs
	namespace 	
DevWebReceitas
 
. 
Services !
.! "
Api" %
.% &
OperationFilter& 5
{ 
public		 

class		 
FileUploadOperation		 $
:		% &
IOperationFilter		' 7
{

 
public 
void 
Apply 
( 
	Operation #
	operation$ -
,- ."
OperationFilterContext/ E
contextF M
)M N
{ 	
if 
( 
	operation 
. 

Parameters $
==% '
null( ,
), -
return 
; 
var 
formFileParams 
=  
context! (
.( )
ApiDescription) 7
.7 8
ActionDescriptor8 H
.H I

ParametersI S
.$ %
Where% *
(* +
x+ ,
=>- /
x0 1
.1 2
ParameterType2 ?
.? @
IsAssignableFrom@ P
(P Q
typeofQ W
(W X
	IFormFileX a
)a b
)b c
)c d
.$ %
Select% +
(+ ,
x, -
=>. 0
x1 2
.2 3
Name3 7
)7 8
.$ %
ToList% +
(+ ,
), -
;- .
var 
formFileSubParams !
=" #
context$ +
.+ ,
ApiDescription, :
.: ;
ActionDescriptor; K
.K L

ParametersL V
. 

SelectMany 
( 
x 
=>  
x! "
." #
ParameterType# 0
.0 1
GetProperties1 >
(> ?
)? @
)@ A
. 
Where 
( 
x 
=> 
x 
. 
PropertyType *
.* +
IsAssignableFrom+ ;
(; <
typeof< B
(B C
	IFormFileC L
)L M
)M N
)N O
. 
Select 
( 
x 
=> 
x 
. 
Name #
)# $
. 
ToList 
( 
) 
; 
var 
allFileParamNames !
=" #
formFileParams$ 2
.2 3
Union3 8
(8 9
formFileSubParams9 J
)J K
;K L
if 
( 
! 
allFileParamNames "
." #
Any# &
(& '
)' (
)( )
return 
; 
var   
paramsToRemove   
=    
new  ! $
List  % )
<  ) *

IParameter  * 4
>  4 5
(  5 6
)  6 7
;  7 8
foreach!! 
(!! 
var!! 
param!! 
in!! !
	operation!!" +
.!!+ ,

Parameters!!, 6
)!!6 7
{"" 
paramsToRemove## 
.## 
AddRange## '
(##' (
from##( ,
fileParamName##- :
in##; =
allFileParamNames##> O
where##P U
param##V [
.##[ \
Name##\ `
.##` a

StartsWith##a k
(##k l
fileParamName##l y
+##z {
$str##| 
)	## 
select
## 
param
## 
)
## 
;
## 
}$$ 
paramsToRemove%% 
.%% 
ForEach%% "
(%%" #
x%%# $
=>%%% '
	operation%%( 1
.%%1 2

Parameters%%2 <
.%%< =
Remove%%= C
(%%C D
x%%D E
)%%E F
)%%F G
;%%G H
foreach&& 
(&& 
var&& 
	paramName&& "
in&&# %
allFileParamNames&&& 7
)&&7 8
{'' 
var(( 
	fileParam(( 
=(( 
new((  #
NonBodyParameter(($ 4
{)) 
Type** 
=** 
$str** !
,**! "
Name++ 
=++ 
	paramName++ $
,++$ %
In,, 
=,, 
$str,, #
}-- 
;-- 
	operation.. 
... 

Parameters.. $
...$ %
Add..% (
(..( )
	fileParam..) 2
)..2 3
;..3 4
}// 
foreach00 
(00 

IParameter00 
param00  %
in00& (
	operation00) 2
.002 3

Parameters003 =
)00= >
{11 
param22 
.22 
In22 
=22 
$str22 %
;22% &
}33 
	operation55 
.55 
Consumes55 
=55  
new55! $
List55% )
<55) *
string55* 0
>550 1
(551 2
)552 3
{554 5
$str556 K
}55L M
;55M N
}66 	
}77 
}88 Å
?C:\Projetos\Receitas\src\DevWebReceitas.Services.Api\Program.cs
	namespace 	
DevWebReceitas
 
. 
Services !
.! "
Api" %
{ 
public 

static 
class 
Program 
{ 
public		 
static		 
void		 
Main		 
(		  
string		  &
[		& '
]		' (
args		) -
)		- .
{

 	 
CreateWebHostBuilder  
(  !
args! %
)% &
.& '
Build' ,
(, -
)- .
.. /
Run/ 2
(2 3
)3 4
;4 5
} 	
public 
static 
IWebHostBuilder % 
CreateWebHostBuilder& :
(: ;
string; A
[A B
]B C
argsD H
)H I
=>J L
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 
UseContentRoot 
( 
	Directory %
.% &
GetCurrentDirectory& 9
(9 :
): ;
); <
. 

UseWebRoot 
( 
$str !
)! "
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
;& '
} 
} .
?C:\Projetos\Receitas\src\DevWebReceitas.Services.Api\Startup.cs
	namespace 	
DevWebReceitas
 
. 
Services !
.! "
Api" %
{ 
public 

class 
Startup 
{ 
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
readonly 
string "
MyAllowSpecificOrigins .
=/ 0
$str1 J
;J K
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddCors 
( 
options $
=>% '
{ 
options 
. 
	AddPolicy !
(! ""
MyAllowSpecificOrigins" 8
,8 9
builder   
=>   
{!! 
builder"" 
."" 
WithOrigins"" '
(""' (
$str""( ?
,""? @
$str##( @
)##@ A
;##A B
}$$ 
)$$ 
;$$ 
}%% 
)%% 
;%% 
services'' 
.(( 
AddMvc(( 
((( 
options(( 
=>((  "
{)) 
options)) 
.)) 
OutputFormatters)) *
.))* +
Remove))+ 1
())1 2
new))2 54
(XmlDataContractSerializerOutputFormatter))6 ^
())^ _
)))_ `
)))` a
;))a b
}))c d
)))d e
.** 
AddJsonOptions** 
(**  
options**  '
=>**( *
options**+ 2
.**2 3
SerializerSettings**3 E
.**E F
NullValueHandling**F W
=**X Y
NullValueHandling**Z k
.**k l
Ignore**l r
)**r s
.++ #
SetCompatibilityVersion++ (
(++( ) 
CompatibilityVersion++) =
.++= >
Version_2_2++> I
)++I J
;++J K
services-- 
.-- 
	Configure-- 
<-- *
GzipCompressionProviderOptions-- =
>--= >
(--> ?
o.. 
=>.. 
o.. 
... 
Level.. 
=.. 
System.. %
...% &
IO..& (
...( )
Compression..) 4
...4 5
CompressionLevel..5 E
...E F
Fastest..F M
)..M N
;..N O
services// 
.// "
AddResponseCompression// +
(//+ ,
o00 
=>00 
o00 
.00 
	Providers00  
.00  !
Add00! $
<00$ %#
GzipCompressionProvider00% <
>00< =
(00= >
)00> ?
)00? @
;00@ A
services22 
.22 
AddSwaggerGen22 "
(22" #
s22# $
=>22% '
{33 
s44 
.44 

SwaggerDoc44 
(44 
$str44 !
,44! "
new44# &
Info44' +
{55 
Version66 
=66 
$str66 "
,66" #
Title77 
=77 
$str77 4
,774 5
Description88 
=88  !
$str88" F
}99 
)99 
;99 
}:: 
):: 
;:: 
RegisterServices<< 
(<< 
services<< %
)<<% &
;<<& '
}== 	
public@@ 
void@@ 
	Configure@@ 
(@@ 
IApplicationBuilder@@ 1
app@@2 5
,@@5 6
IHostingEnvironment@@7 J
env@@K N
)@@N O
{AA 	
ifBB 
(BB 
envBB 
.BB 
IsDevelopmentBB !
(BB! "
)BB" #
)BB# $
{CC 
appDD 
.DD %
UseDeveloperExceptionPageDD -
(DD- .
)DD. /
;DD/ 0
}EE 
elseFF 
{GG 
appHH 
.HH 
UseHstsHH 
(HH 
)HH 
;HH 
}II 
ifLL 
(LL 
envLL 
.LL 
IsDevelopmentLL !
(LL! "
)LL" #
||LL$ &
envLL' *
.LL* +
	IsStagingLL+ 4
(LL4 5
)LL5 6
)LL6 7
{MM 
appNN 
.NN 

UseSwaggerNN 
(NN 
)NN  
;NN  !
appOO 
.OO 
UseSwaggerUIOO  
(OO  !
optOO! $
=>OO% '
{PP 
optQQ 
.QQ 
SwaggerEndpointQQ '
(QQ' (
$strQQ( B
,QQB C
$strQQD _
)QQ_ `
;QQ` a
}RR 
)RR 
;RR 
}SS 
appUU 
.UU "
UseResponseCompressionUU &
(UU& '
)UU' (
;UU( )
appVV 
.VV 
UseCorsVV 
(VV "
MyAllowSpecificOriginsVV .
)VV. /
;VV/ 0
appXX 
.XX 
UseMvcXX 
(XX 
)XX 
;XX 
}YY 	
private[[ 
static[[ 
void[[ 
RegisterServices[[ ,
([[, -
IServiceCollection[[- ?
services[[@ H
)[[H I
{\\ 	&
NativeInjectorBootStrapper]] &
.]]& '
RegisterServices]]' 7
(]]7 8
services]]8 @
)]]@ A
;]]A B
}^^ 	
}__ 
}`` 