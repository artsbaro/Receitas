ƒ	
HC:\Projetos\Receitas\src\DevWebReceitas.UI\Controllers\BaseController.cs
	namespace 	
DevWebReceitas
 
. 
UI 
. 
Controllers '
{ 
public 

class 
BaseController 
:  !

Controller" ,
{ 
}		 
public 

static 
class 
HttpExtensions &
{ 
public 
static 
bool 
IsAjaxRequest (
(( )
this) -
HttpRequest. 9
request: A
)A B
{ 	
if 
( 
request 
== 
null 
)  
return 
false 
; 
else 
if 
( 
request 
. 
Headers $
!=% '
null( ,
), -
return 
request 
. 
Headers &
[& '
$str' 9
]9 :
==; =
$str> N
;N O
return 
false 
; 
} 	
} 
} àF
MC:\Projetos\Receitas\src\DevWebReceitas.UI\Controllers\CategoriaController.cs
	namespace

 	
DevWebReceitas


 
.

 
UI

 
.

 
Controllers

 '
{ 
public 

class 
CategoriaController $
:% &
BaseController' 5
{ 
private 
readonly 
ICategoriaService *
_service+ 3
;3 4
public 
CategoriaController "
(" #
ICategoriaService# 4
service5 <
)< =
{ 	
_service 
= 
service 
; 
} 	
public 
ActionResult 
Index !
(! "
string" (
titulo) /
=0 1
null2 6
,6 7
string8 >
	descricao? H
=I J
nullK O
)O P
{ 	
var 

categorias 
= 
_service 
. 
List 
( 
new 
Domain 
. 
Filters "
." #
CategoriaFilter# 2
{ 
Titulo 
= 
titulo #
,# $
	Descricao 
= 
	descricao  )
} 
) 
; 
if!! 
(!! 
HttpExtensions!! 
.!! 
IsAjaxRequest!! ,
(!!, -
Request!!- 4
)!!4 5
)!!5 6
return"" 
PartialView"" "
(""" #
$str""# 0
,""0 1

categorias""2 <
)""< =
;""= >
return## 
View## 
(## 

categorias## "
)##" #
;### $
}$$ 	
public'' 
ActionResult'' 
Details'' #
(''# $
Guid''$ (
codigo'') /
)''/ 0
{(( 	
var)) 
	categoria)) 
=)) 
Task))  
.))  !
Run))! $
())$ %
())% &
)))& '
=>))( *
_service))+ 3
.))3 4

FindByCode))4 >
())> ?
codigo))? E
)))E F
)))F G
;))G H
return** 
View** 
(** 
	categoria** !
.**! "
Result**" (
)**( )
;**) *
}++ 	
public.. 
ActionResult.. 
Create.. "
(.." #
)..# $
{// 	
return00 
View00 
(00 
)00 
;00 
}11 	
[44 	
HttpPost44	 
]44 
[55 	$
ValidateAntiForgeryToken55	 !
]55! "
public66 
ActionResult66 
Create66 "
(66" #
CategoriaInsertDto66# 5
dto666 9
)669 :
{77 	
try88 
{99 
_service:: 
.:: 
Create:: 
(::  
dto::  #
)::# $
;::$ %
return;; 
RedirectToAction;; '
(;;' (
nameof;;( .
(;;. /
Index;;/ 4
);;4 5
);;5 6
;;;6 7
}<< 
catch== 
{>> 
return?? 
View?? 
(?? 
)?? 
;?? 
}@@ 
}AA 	
publicDD 
ActionResultDD 
EditDD  
(DD  !
GuidDD! %
codigoDD& ,
)DD, -
{EE 	
returnFF 
DetailsFF 
(FF 
codigoFF !
)FF! "
;FF" #
}GG 	
[JJ 	
HttpPostJJ	 
]JJ 
[KK 	$
ValidateAntiForgeryTokenKK	 !
]KK! "
publicLL 
ActionResultLL 
EditLL  
(LL  !
CategoriaDtoLL! -
dtoLL. 1
)LL1 2
{MM 	
tryNN 
{OO 
_servicePP 
.PP 
UpdatePP 
(PP  
dtoPP  #
)PP# $
;PP$ %
returnQQ 
RedirectToActionQQ '
(QQ' (
nameofQQ( .
(QQ. /
IndexQQ/ 4
)QQ4 5
)QQ5 6
;QQ6 7
}RR 
catchSS 
{TT 
returnUU 
ViewUU 
(UU 
)UU 
;UU 
}VV 
}WW 	
publicZZ 
ActionResultZZ 
DeleteZZ "
(ZZ" #
GuidZZ# '
codigoZZ( .
)ZZ. /
{[[ 	
return\\ 
Details\\ 
(\\ 
codigo\\ !
)\\! "
;\\" #
}]] 	
[`` 	
HttpPost``	 
,`` 

ActionName`` 
(`` 
$str`` &
)``& '
]``' (
[aa 	$
ValidateAntiForgeryTokenaa	 !
]aa! "
publicbb 
ActionResultbb 
DeleteConfirmedbb +
(bb+ ,
CategoriaDtobb, 8
dtobb9 <
)bb< =
{cc 	
trydd 
{ee 
_serviceff 
.ff 
Removeff 
(ff  
dtoff  #
.ff# $
Codigoff$ *
)ff* +
;ff+ ,
returngg 
RedirectToActiongg '
(gg' (
nameofgg( .
(gg. /
Indexgg/ 4
)gg4 5
)gg5 6
;gg6 7
}hh 
catchii 
{jj 
returnkk 
Viewkk 
(kk 
)kk 
;kk 
}ll 
}mm 	
privatess 
asyncss 
Taskss 
<ss 
IEnumerabless &
<ss& '
CategoriaDtoss' 3
>ss3 4
>ss4 5
GetCategoriasss6 C
(ssC D
)ssD E
{tt 	
ConcurrentBaguu 
<uu 
CategoriaDtouu &
>uu& '
listuu( ,
=uu- .
newuu/ 2
ConcurrentBaguu3 @
<uu@ A
CategoriaDtouuA M
>uuM N
(uuN O
)uuO P
;uuP Q
varvv 
tasksvv 
=vv 
newvv 
Taskvv  
[vv  !
]vv! "
{ww 
Taskxx 
.xx 
Runxx 
(xx 
(xx 
)xx 
=>xx 
{xx  
listxx! %
.xx% &
Addxx& )
(xx) *
GetCategoriaxx* 6
(xx6 7
$strxx7 ]
)xx] ^
)xx^ _
;xx_ `
}xxa b
)xxb c
,xxc d
Taskyy 
.yy 
Runyy 
(yy 
(yy 
)yy 
=>yy 
{yy  
listyy! %
.yy% &
Addyy& )
(yy) *
GetCategoriayy* 6
(yy6 7
$stryy7 ]
)yy] ^
)yy^ _
;yy_ `
}yya b
)yyb c
,yyc d
Taskzz 
.zz 
Runzz 
(zz 
(zz 
)zz 
=>zz 
{zz  
listzz! %
.zz% &
Addzz& )
(zz) *
GetCategoriazz* 6
(zz6 7
$strzz7 ]
)zz] ^
)zz^ _
;zz_ `
}zza b
)zzb c
,zzc d
Task{{ 
.{{ 
Run{{ 
({{ 
({{ 
){{ 
=>{{ 
{{{  
list{{! %
.{{% &
Add{{& )
({{) *
GetCategoria{{* 6
({{6 7
$str{{7 ]
){{] ^
){{^ _
;{{_ `
}{{a b
){{b c
}|| 
;|| 
Task~~ 
.~~ 
WaitAll~~ 
(~~ 
tasks~~ 
)~~ 
;~~  
return 
list 
; 
}
ÄÄ 	
private
ÅÅ 
CategoriaDto
ÅÅ 
GetCategoria
ÅÅ )
(
ÅÅ) *
string
ÅÅ* 0
code
ÅÅ1 5
)
ÅÅ5 6
{
ÇÇ 	
var
ÉÉ 
client
ÉÉ 
=
ÉÉ 
new
ÉÉ 

RestClient
ÉÉ '
(
ÉÉ' (
$"
ÉÉ( *
$str
ÉÉ* O
{
ÉÉO P
code
ÉÉP T
}
ÉÉT U
"
ÉÉU V
)
ÉÉV W
;
ÉÉW X
client
ÑÑ 
.
ÑÑ 
Timeout
ÑÑ 
=
ÑÑ 
-
ÑÑ 
$num
ÑÑ 
;
ÑÑ  
var
ÖÖ 
request
ÖÖ 
=
ÖÖ 
new
ÖÖ 
RestRequest
ÖÖ )
(
ÖÖ) *
Method
ÖÖ* 0
.
ÖÖ0 1
GET
ÖÖ1 4
)
ÖÖ4 5
;
ÖÖ5 6
var
ÜÜ 
response
ÜÜ 
=
ÜÜ 
client
ÜÜ !
.
ÜÜ! "
Execute
ÜÜ" )
<
ÜÜ) *
CategoriaDto
ÜÜ* 6
>
ÜÜ6 7
(
ÜÜ7 8
request
ÜÜ8 ?
)
ÜÜ? @
;
ÜÜ@ A
return
áá 
response
áá 
.
áá 
Data
áá  
;
áá  !
}
àà 	
}
ââ 
}ää “
HC:\Projetos\Receitas\src\DevWebReceitas.UI\Controllers\HomeController.cs
	namespace 	
DevWebReceitas
 
. 
UI 
. 
Controllers '
{ 
public 

class 
HomeController 
:  !

Controller" ,
{ 
public		 
IActionResult		 
Index		 "
(		" #
)		# $
{

 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
Privacy $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" #
,# $
Location% -
=. /!
ResponseCacheLocation0 E
.E F
NoneF J
,J K
NoStoreL S
=T U
trueV Z
)Z [
][ \
public 
IActionResult 
Error "
(" #
)# $
{ 	
return 
View 
( 
new 
ErrorViewModel *
{+ ,
	RequestId- 6
=7 8
Activity9 A
.A B
CurrentB I
?I J
.J K
IdK M
??N P
HttpContextQ \
.\ ]
TraceIdentifier] l
}m n
)n o
;o p
} 	
} 
} ∫_
KC:\Projetos\Receitas\src\DevWebReceitas.UI\Controllers\ReceitaController.cs
	namespace 	
DevWebReceitas
 
. 
UI 
. 
Controllers '
{		 
public

 

class

 
ReceitaController

 "
:

# $
BaseController

% 3
{ 
private 
readonly 
IReceitaService (
_service) 1
;1 2
private 
readonly 
ICategoriaService *
_categService+ 8
;8 9
public 
ReceitaController  
(  !
IReceitaService! 0
service1 8
,8 9
ICategoriaService: K
categServiceL X
)X Y
{ 	
_service 
= 
service 
; 
_categService 
= 
categService (
;( )
} 	
public 
ActionResult 
Index !
(! "
string" (
titulo) /
,/ 0
string1 7
	descricao8 A
,A B
stringC I
modoPreparoJ U
,U V
stringW ]
ingredientes^ j
,j k
stringl r
	categorias |
)| }
{ 	
var 
receitas 
= 
_service #
.# $
List$ (
(( )
new 
Domain 
. 
Filters "
." #
ReceitaFilter# 0
{ 
Titulo 
= 
titulo #
,# $
	Descricao 
= 
	descricao  )
,) *
ModoPreparo 
=  !
modoPreparo" -
,- .
Ingredientes  
=! "
ingredientes# /
,/ 0
TituloCategoria   #
=  $ %
	categoria  & /
}!! 
)!! 
;!! 
if## 
(## 
HttpExtensions## 
.## 
IsAjaxRequest## ,
(##, -
Request##- 4
)##4 5
)##5 6
return$$ 
PartialView$$ "
($$" #
$str$$# .
,$$. /
receitas$$0 8
)$$8 9
;$$9 :
return&& 
View&& 
(&& 
receitas&&  
)&&  !
;&&! "
}'' 	
public** 
ActionResult** 
Details** #
(**# $
Guid**$ (
codigo**) /
)**/ 0
{++ 	
var,, 
receita,, 
=,, 
_service,, "
.,," #

FindByCode,,# -
(,,- .
codigo,,. 4
),,4 5
;,,5 6
try-- 
{.. 
ViewBag// 
.// 
Imagem// 
=//  
_service//! )
.//) *
FindImageByCode//* 9
(//9 :
codigo//: @
)//@ A
;//A B
return00 
View00 
(00 
receita00 #
)00# $
;00$ %
}11 
catch22 
{33 
return44 
View44 
(44 
receita44 #
)44# $
;44$ %
}55 
}66 	
public99 
ActionResult99 
Create99 "
(99" #
)99# $
{:: 	
var;; 

categorias;; 
=;; 
_categService;; *
.;;* +
List;;+ /
(;;/ 0
new;;0 3
Domain;;4 :
.;;: ;
Filters;;; B
.;;B C
CategoriaFilter;;C R
(;;R S
);;S T
);;T U
;;;U V
if<< 
(<< 

categorias<< 
.<< 
ToList<< !
(<<! "
)<<" #
.<<# $
Count<<$ )
==<<* ,
$num<<- .
)<<. /
{== 

ModelState>> 
.>> 
AddModelError>> (
(>>( )
$str>>) 0
,>>0 1
$str>>2 l
)>>l m
;>>m n
}?? 
ViewBag@@ 
.@@ 

Categorias@@ 
=@@  

categorias@@! +
;@@+ ,
returnAA 
ViewAA 
(AA 
)AA 
;AA 
}BB 	
[EE 	
HttpPostEE	 
]EE 
[FF 	$
ValidateAntiForgeryTokenFF	 !
]FF! "
publicGG 
ActionResultGG 
CreateGG "
(GG" #
ReceitaInsertDtoGG# 3
dtoGG4 7
)GG7 8
{HH 	
tryII 
{JJ 
_serviceKK 
.KK 
CreateKK 
(KK  
dtoKK  #
)KK# $
;KK$ %
returnLL 
RedirectToActionLL '
(LL' (
nameofLL( .
(LL. /
IndexLL/ 4
)LL4 5
)LL5 6
;LL6 7
}MM 
catchNN 
{OO 
returnPP 
ViewPP 
(PP 
)PP 
;PP 
}QQ 
}RR 	
publicUU 
ActionResultUU 
EditUU  
(UU  !
GuidUU! %
codigoUU& ,
)UU, -
{VV 	
varWW 
receitaWW 
=WW 
_serviceWW "
.WW" #
FindByCodeEditDtoWW# 4
(WW4 5
codigoWW5 ;
)WW; <
;WW< =
varYY 

categoriasYY 
=YY 
newYY  

SelectListYY! +
(YY+ ,
_categServiceZZ 
.ZZ 
ListZZ "
(ZZ" #
newZZ# &
DomainZZ' -
.ZZ- .
FiltersZZ. 5
.ZZ5 6
CategoriaFilterZZ6 E
(ZZE F
)ZZF G
)ZZG H
,ZZH I
$str[[ 
,[[ 
$str[[ "
,[[" #
receita[[$ +
.[[+ ,
Codigo[[, 2
)[[2 3
;[[3 4
ViewBag\\ 
.\\ 

Categorias\\ 
=\\  

categorias\\! +
;\\+ ,
try]] 
{^^ 
ViewBag__ 
.__ 
Imagem__ 
=__  
_service__! )
.__) *
FindImageByCode__* 9
(__9 :
codigo__: @
)__@ A
;__A B
receita`` 
.`` 
Imagem`` 
=``  
ViewBag``! (
.``( )
Imagem``) /
;``/ 0
returnaa 
Viewaa 
(aa 
receitaaa #
)aa# $
;aa$ %
}bb 
catchcc 
{dd 
returnee 
Viewee 
(ee 
receitaee #
)ee# $
;ee$ %
}ff 
}gg 	
[jj 	
HttpPostjj	 
]jj 
[kk 	$
ValidateAntiForgeryTokenkk	 !
]kk! "
publicll 
ActionResultll 
Editll  
(ll  !
ReceitaEditDtoll! /
receitall0 7
)ll7 8
{mm 	
trynn 
{oo 
_servicepp 
.pp 
Updatepp 
(pp  
receitapp  '
)pp' (
;pp( )
returnqq 
RedirectToActionqq '
(qq' (
nameofqq( .
(qq. /
Indexqq/ 4
)qq4 5
)qq5 6
;qq6 7
}rr 
catchss 
{tt 
returnuu 
Viewuu 
(uu 
)uu 
;uu 
}vv 
}ww 	
publiczz 
ActionResultzz 
Deletezz "
(zz" #
Guidzz# '
codigozz( .
)zz. /
{{{ 	
return|| 
Details|| 
(|| 
codigo|| !
)||! "
;||" #
}}} 	
[
ÄÄ 	
HttpPost
ÄÄ	 
,
ÄÄ 

ActionName
ÄÄ 
(
ÄÄ 
$str
ÄÄ &
)
ÄÄ& '
]
ÄÄ' (
[
ÅÅ 	&
ValidateAntiForgeryToken
ÅÅ	 !
]
ÅÅ! "
public
ÇÇ 
ActionResult
ÇÇ 
Delete
ÇÇ "
(
ÇÇ" #

ReceitaDto
ÇÇ# -
receita
ÇÇ. 5
)
ÇÇ5 6
{
ÉÉ 	
try
ÑÑ 
{
ÖÖ 
_service
ÜÜ 
.
ÜÜ 
Remove
ÜÜ 
(
ÜÜ  
receita
ÜÜ  '
.
ÜÜ' (
Codigo
ÜÜ( .
)
ÜÜ. /
;
ÜÜ/ 0
return
áá 
RedirectToAction
áá '
(
áá' (
nameof
áá( .
(
áá. /
Index
áá/ 4
)
áá4 5
)
áá5 6
;
áá6 7
}
àà 
catch
ââ 
{
ää 
return
ãã 
View
ãã 
(
ãã 
)
ãã 
;
ãã 
}
åå 
}
çç 	
public
èè 
ActionResult
èè 
Like
èè  
(
èè  !
Guid
èè! %
codigo
èè& ,
,
èè, -
string
èè. 4

redirectTo
èè5 ?
)
èè? @
{
êê 	
try
ëë 
{
íí 
_service
ìì 
.
ìì 
Like
ìì 
(
ìì 
codigo
ìì $
)
ìì$ %
;
ìì% &
if
ïï 
(
ïï 

redirectTo
ïï 
.
ïï 
Equals
ïï %
(
ïï% &
$str
ïï& /
,
ïï/ 0
StringComparison
ïï1 A
.
ïïA B
OrdinalIgnoreCase
ïïB S
)
ïïS T
)
ïïT U
return
ññ 
RedirectToAction
ññ +
(
ññ+ ,
$str
ññ, 5
,
ññ5 6
new
ññ7 :
{
ññ; <
codigo
ññ= C
}
ññD E
)
ññE F
;
ññF G
var
òò 
receita
òò 
=
òò 
_service
òò &
.
òò& '

FindByCode
òò' 1
(
òò1 2
codigo
òò2 8
)
òò8 9
;
òò9 :
if
öö 
(
öö 
HttpExtensions
öö "
.
öö" #
IsAjaxRequest
öö# 0
(
öö0 1
Request
öö1 8
)
öö8 9
)
öö9 :
return
õõ 
PartialView
õõ &
(
õõ& '
$str
õõ' 7
,
õõ7 8
receita
õõ9 @
)
õõ@ A
;
õõA B
return
ùù 
RedirectToAction
ùù '
(
ùù' (
$str
ùù( /
)
ùù/ 0
;
ùù0 1
}
ûû 
catch
üü 
{
†† 
return
°° 
View
°° 
(
°° 
)
°° 
;
°° 
}
¢¢ 
}
££ 	
public
•• 
ActionResult
•• 
Dislike
•• #
(
••# $
Guid
••$ (
codigo
••) /
,
••/ 0
string
••1 7

redirectTo
••8 B
)
••B C
{
¶¶ 	
try
ßß 
{
®® 
_service
©© 
.
©© 
Dislike
©©  
(
©©  !
codigo
©©! '
)
©©' (
;
©©( )
if
™™ 
(
™™ 

redirectTo
™™ 
.
™™ 
Equals
™™ %
(
™™% &
$str
™™& /
,
™™/ 0
StringComparison
™™1 A
.
™™A B
OrdinalIgnoreCase
™™B S
)
™™S T
)
™™T U
return
´´ 
RedirectToAction
´´ +
(
´´+ ,
$str
´´, 5
,
´´5 6
new
´´7 :
{
´´; <
codigo
´´= C
}
´´D E
)
´´E F
;
´´F G
var
≠≠ 
receita
≠≠ 
=
≠≠ 
_service
≠≠ &
.
≠≠& '

FindByCode
≠≠' 1
(
≠≠1 2
codigo
≠≠2 8
)
≠≠8 9
;
≠≠9 :
if
ØØ 
(
ØØ 
HttpExtensions
ØØ "
.
ØØ" #
IsAjaxRequest
ØØ# 0
(
ØØ0 1
Request
ØØ1 8
)
ØØ8 9
)
ØØ9 :
return
∞∞ 
PartialView
∞∞ &
(
∞∞& '
$str
∞∞' 7
,
∞∞7 8
receita
∞∞9 @
)
∞∞@ A
;
∞∞A B
return
≤≤ 
RedirectToAction
≤≤ '
(
≤≤' (
$str
≤≤( /
)
≤≤/ 0
;
≤≤0 1
}
≥≥ 
catch
¥¥ 
{
µµ 
return
∂∂ 
View
∂∂ 
(
∂∂ 
)
∂∂ 
;
∂∂ 
}
∑∑ 
}
∏∏ 	
}
ππ 
}∫∫ ¢
GC:\Projetos\Receitas\src\DevWebReceitas.UI\Models\CategoriaViewModel.cs
	namespace 	
DevWebReceitas
 
. 
UI 
. 
Models "
{ 
public 

class 
CategoriaViewModel #
{		 
public

 
IEnumerable

 
<

 
	Categoria

 $
>

$ %

Categorias

& 0
{

1 2
get

3 6
;

6 7
set

8 ;
;

; <
}

= >
public 
string 
SearchTitulo "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
SearchDescricao %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
CategoriaViewModel !
(! "
)" #
{ 	
} 	
} 
public 

class 
	Categoria 
{ 
[ 	
Required	 
( 
ErrorMessage 
=  
$str! 9
)9 :
]: ;
public 
Guid 
Codigo 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
( 
ErrorMessage 
=  
$str! 7
)7 8
]8 9
[ 	
	MinLength	 
( 
$num 
, 
ErrorMessage "
=# $
$str% J
)J K
]K L
[ 	
	MaxLength	 
( 
$num 
, 
ErrorMessage $
=% &
$str' O
)O P
]P Q
[ 	
DisplayName	 
( 
$str 
) 
] 
public 
string 
Titulo 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
( 
ErrorMessage 
=  
$str! 7
)7 8
]8 9
[   	
	MinLength  	 
(   
$num   
,   
ErrorMessage   "
=  # $
$str  % J
)  J K
]  K L
[!! 	
	MaxLength!!	 
(!! 
$num!! 
,!! 
ErrorMessage!! $
=!!% &
$str!!' O
)!!O P
]!!P Q
["" 	
DisplayName""	 
("" 
$str""  
)""  !
]""! "
public## 
string## 
	Descricao## 
{##  !
get##" %
;##% &
set##' *
;##* +
}##, -
}$$ 
}%% ≤
CC:\Projetos\Receitas\src\DevWebReceitas.UI\Models\ErrorViewModel.cs
	namespace 	
DevWebReceitas
 
. 
UI 
. 
Models "
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
	RequestId 
{  !
get" %
;% &
set' *
;* +
}, -
public		 
bool		 
ShowRequestId		 !
=>		" $
!		% &
string		& ,
.		, -
IsNullOrEmpty		- :
(		: ;
	RequestId		; D
)		D E
;		E F
}

 
} úN
HC:\Projetos\Receitas\src\DevWebReceitas.UI\NativeInjectorBootStrapper.cs
	namespace 	
DevWebReceitas
 
. 
UI 
{ 
public 

static 
class &
NativeInjectorBootStrapper 2
{ 
public 
static 
void 
RegisterServices +
(+ ,
IServiceCollection, >
services? G
)G H
{ 	
services 
. 
AddSingleton !
<! " 
IHttpContextAccessor" 6
,6 7
HttpContextAccessor8 K
>K L
(L M
)M N
;N O
services 
. 
AddSingleton !
<! "!
IReceitaEditDtoMapper" 7
,7 8 
ReceitaEditDtoMapper9 M
>M N
(N O
)O P
;P Q
services 
. 
AddSingleton !
<! "
IReceitaDtoMapper" 3
,3 4
ReceitaDtoMapper5 E
>E F
(F G
)G H
;H I
services 
. 
AddSingleton !
<! "
IReceitaMapper" 0
,0 1
ReceitaMapper2 ?
>? @
(@ A
)A B
;B C
LoadAllAssemblies 
( 
) 
;  
services 
.  
RegisterRepositories )
() *
)* +
. "
RegisterDomainServices '
(' (
)( )
. '
RegisterApplicationServices ,
(, -
)- .
.   
RegisterMappers    
(    !
)  ! "
;  " #
}!! 	
public## 
static## 
IServiceCollection## ( 
RegisterRepositories##) =
(##= >
this##> B
IServiceCollection##C U
services##V ^
)##^ _
{$$ 	
var%% 
types%% 
=%% 
typeof%% 
(%% 
IRepository%% *
<%%* +
,%%+ ,
>%%, -
)%%- .
.&& 
FindInAssembly&& 
(&&  
x&&  !
=>&&" $
x&&% &
.&&& '
GetName&&' .
(&&. /
)&&/ 0
.&&0 1
Name&&1 5
==&&6 8
$str&&9 T
)&&T U
;&&U V
foreach(( 
((( 
var(( 
type(( 
in((  
types((! &
)((& '
services)) 
.)) 
	AddScoped)) "
())" #
type))# '
.))' (
Key))( +
,))+ ,
type))- 1
.))1 2
Value))2 7
)))7 8
;))8 9
return++ 
services++ 
;++ 
},, 	
public.. 
static.. 
IServiceCollection.. ("
RegisterDomainServices..) ?
(..? @
this..@ D
IServiceCollection..E W
services..X `
)..` a
{// 	
var00 
types00 
=00 
typeof00 
(00 
IDomainService00 -
<00- .
,00. /
>00/ 0
)000 1
.11 
FindInAssembly11 
(11  
x11  !
=>11" $
x11% &
.11& '
GetName11' .
(11. /
)11/ 0
.110 1
Name111 5
==116 8
$str119 Y
)11Y Z
;11Z [
foreach33 
(33 
var33 
type33 
in33  
types33! &
)33& '
services44 
.44 
	AddScoped44 "
(44" #
type44# '
.44' (
Key44( +
,44+ ,
type44- 1
.441 2
Value442 7
)447 8
;448 9
return66 
services66 
;66 
}77 	
public99 
static99 
IServiceCollection99 ('
RegisterApplicationServices99) D
(99D E
this99E I
IServiceCollection99J \
services99] e
)99e f
{:: 	
var;; 
types;; 
=;; 
typeof;; 
(;; 
IServiceBase;; +
<;;+ ,
>;;, -
);;- .
.<< 
FindInAssembly<< 
(<<  
x<<  !
=><<" $
x<<% &
.<<& '
GetName<<' .
(<<. /
)<</ 0
.<<0 1
Name<<1 5
==<<6 8
$str<<9 U
)<<U V
;<<V W
foreach>> 
(>> 
var>> 
type>> 
in>>  
types>>! &
)>>& '
services?? 
.?? 
	AddScoped?? "
(??" #
type??# '
.??' (
Key??( +
,??+ ,
type??- 1
.??1 2
Value??2 7
)??7 8
;??8 9
returnAA 
servicesAA 
;AA 
}BB 	
publicDD 
staticDD 
IServiceCollectionDD (
RegisterMappersDD) 8
(DD8 9
thisDD9 =
IServiceCollectionDD> P
servicesDDQ Y
)DDY Z
{EE 	
returnFF 
servicesFF 
;FF 
}GG 	
privateKK 
staticKK 

DictionaryKK !
<KK! "
TypeKK" &
,KK& '
TypeKK( ,
>KK, -
FindInAssemblyKK. <
(KK< =
thisKK= A
TypeKKB F
typeKKG K
,KKK L
FuncKKM Q
<KKQ R
AssemblyKKR Z
,KKZ [
boolKK\ `
>KK` a
	predicateKKb k
)KKk l
{LL 	
returnMM 
	AppDomainMM 
.MM 
CurrentDomainMM *
.NN 
GetAssembliesNN 
(NN 
)NN  
.OO 
WhereOO 
(OO 
	predicateOO  
)OO  !
.PP 

SelectManyPP 
(PP 
xPP 
=>PP  
xPP! "
.PP" #
GetExportedTypesPP# 3
(PP3 4
)PP4 5
)PP5 6
.QQ 
WhereQQ 
(QQ 
xQQ 
=>QQ 
xRR 
.RR 
IsClassRR 
&&SS 
!SS 
xSS 
.SS 

IsAbstractSS $
&&TT 
xTT 
.TT 
GetInterfacesTT &
(TT& '
)TT' (
.TT( )
AnyTT) ,
(TT, -
)TT- .
&&UU 
(UU 
xWW 
.WW 
GetInterfacesWW '
(WW' (
)WW( )
.WW) *
AnyWW* -
(WW- .
iWW. /
=>WW0 2
iXX 
.XX 
IsGenericTypeXX +
&&YY 
iYY  
.YY  !$
GetGenericTypeDefinitionYY! 9
(YY9 :
)YY: ;
==YY< >
typeYY? C
)ZZ 
||\\ 
!\\ 
x\\ 
.\\ 
GetInterfaces\\ +
(\\+ ,
)\\, -
.\\- .
Any\\. 1
(\\1 2
i\\2 3
=>\\4 6
i\\7 8
.\\8 9
IsGenericType\\9 F
)\\F G
)]] 
)^^ 
.^^ 
ToDictionary^^ 
(^^ 
x__ 
=>__ 
x__ 
.`` 
GetInterfaces`` &
(``& '
)``' (
.aa 
Whereaa 
(aa 
iaa  
=>aa! #
!aa$ %
iaa% &
.aa& '
IsGenericTypeaa' 4
)aa4 5
.bb 
OrderByDescendingbb *
(bb* +
ibb+ ,
=>bb- /
ibb0 1
.bb1 2
GetInterfacesbb2 ?
(bb? @
)bb@ A
.bbA B
LengthbbB H
)bbH I
.cc 
Firstcc 
(cc 
)cc  
,cc  !
xdd 
=>dd 
xdd 
)ee 
;ee 
}ff 	
privatehh 
statichh 
voidhh 
LoadAllAssemblieshh -
(hh- .
)hh. /
{ii 	
varjj 
loadedAssembliesjj  
=jj! "
	AppDomainjj# ,
.jj, -
CurrentDomainjj- :
.jj: ;
GetAssembliesjj; H
(jjH I
)jjI J
.jjJ K
ToListjjK Q
(jjQ R
)jjR S
;jjS T
varkk 
loadedPathskk 
=kk 
loadedAssemblieskk .
.kk. /
Selectkk/ 5
(kk5 6
akk6 7
=>kk8 :
akk; <
.kk< =
Locationkk= E
)kkE F
.kkF G
ToArraykkG N
(kkN O
)kkO P
;kkP Q
varmm 
referencedPathsmm 
=mm  !
	Directorymm" +
.mm+ ,
GetFilesmm, 4
(mm4 5
	AppDomainmm5 >
.mm> ?
CurrentDomainmm? L
.mmL M
BaseDirectorymmM Z
,mmZ [
$strmm\ c
)mmc d
;mmd e
varnn 
toLoadnn 
=nn 
referencedPathsnn (
.nn( )
Wherenn) .
(nn. /
rnn/ 0
=>nn1 3
!nn4 5
loadedPathsnn5 @
.nn@ A
ContainsnnA I
(nnI J
rnnJ K
,nnK L
StringComparernnM [
.nn[ \&
InvariantCultureIgnoreCasenn\ v
)nnv w
)nnw x
.nnx y
ToListnny 
(	nn Ä
)
nnÄ Å
;
nnÅ Ç
toLoadpp 
.pp 
ForEachpp 
(pp 
pathpp 
=>pp  "
loadedAssembliespp# 3
.pp3 4
Addpp4 7
(pp7 8
	AppDomainpp8 A
.ppA B
CurrentDomainppB O
.ppO P
LoadppP T
(ppT U
AssemblyNameppU a
.ppa b
GetAssemblyNameppb q
(ppq r
pathppr v
)ppv w
)ppw x
)ppx y
)ppy z
;ppz {
}qq 	
}tt 
}uu ê	
5C:\Projetos\Receitas\src\DevWebReceitas.UI\Program.cs
	namespace 	
DevWebReceitas
 
. 
UI 
{ 
public 

static 
class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	 
CreateWebHostBuilder

  
(

  !
args

! %
)

% &
.

& '
Build

' ,
(

, -
)

- .
.

. /
Run

/ 2
(

2 3
)

3 4
;

4 5
} 	
public 
static 
IWebHostBuilder % 
CreateWebHostBuilder& :
(: ;
string; A
[A B
]B C
argsD H
)H I
=>J L
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
;& '
} 
} ˇ
5C:\Projetos\Receitas\src\DevWebReceitas.UI\Startup.cs
	namespace 	
DevWebReceitas
 
. 
UI 
{ 
public		 

class		 
Startup		 
{

 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddMvc 
( 
) 
. #
SetCompatibilityVersion 5
(5 6 
CompatibilityVersion6 J
.J K
Version_2_2K V
)V W
;W X
RegisterServices 
( 
services %
)% &
;& '
} 	
public 
void 
	Configure 
( 
IApplicationBuilder 1
app2 5
,5 6
IHostingEnvironment7 J
envK N
)N O
{ 	
if 
( 
env 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. %
UseDeveloperExceptionPage -
(- .
). /
;/ 0
}   
else!! 
{"" 
app## 
.## 
UseExceptionHandler## '
(##' (
$str##( 5
)##5 6
;##6 7
}$$ 
app&& 
.&& 
UseHttpsRedirection&& #
(&&# $
)&&$ %
;&&% &
app'' 
.'' 
UseStaticFiles'' 
('' 
)''  
;''  !
app)) 
.)) 
UseMvc)) 
()) 
routes)) 
=>))  
{** 
routes++ 
.++ 
MapRoute++ 
(++  
name,, 
:,, 
$str,, #
,,,# $
template-- 
:-- 
$str-- F
)--F G
;--G H
}.. 
).. 
;.. 
}// 	
private11 
static11 
void11 
RegisterServices11 ,
(11, -
IServiceCollection11- ?
services11@ H
)11H I
{22 	&
NativeInjectorBootStrapper33 &
.33& '
RegisterServices33' 7
(337 8
services338 @
)33@ A
;33A B
}44 	
}55 
}66 